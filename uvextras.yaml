
defaults:
  - config: $HOME/.config/uvextras/uvextras.yaml
  - home: $HOME/.local/share/uvextras
  - scriptshome: $UVEXTRAS_HOME/scripts

  - localdir: .uvextras

envvars:
  - bind: config
    name: UVEXTRAS_CONFIG
    resolve:
      - $XDG_CONFIG_HOME/uvextras/uvextras.yaml
      - $HOME/.config/uvextras/uvextras.yaml
      - $PWD/uvextras.yaml

  - bind: home
    name: UVEXTRAS_HOME
    resolve:
      - $XDG_DATA_HOME/share/uvextras
      - $HOME/.local/share/uvextras
      - $PWD

  - bind:  scriptshome
    name: UVEXTRAS_SCRIPTSHOME
    resolve:
      - $UVEXTRAS_HOME/scripts
      - $PWD/scripts

  - bind: localdir
    name: UVEXTRAS_LOCAL_DIR
    resolve:
      - $PWD/.uvextras

scripts:
  - name: create.py
    desc: Create .venv optionally --system-site-packages (override `with-system` in project config)
    cmd: uv run --no-project
    is_local: False
    options:
      with-system: true

  - name: allclean
    desc: runs clean and envclean; similar to distclean
    is_local: False
    options:
      depends-on:
      - clean.py
      - envclean.py

  - name: clean.py
    desc: cleans artifacts; override `items_to_delete` in project config
    cmd: uv run --no-project
    is_local: False
    options:
      items_to_delete: build .coverage coverage.xml log .mypy_cache .pdm-build __pycache__ __pypackages__ .pytest_cache .tox

  - name: envclean.py
    desc: cleans environment artifacts; override `items_to_delete` in project config
    cmd: uv run --no-project
    is_local: False
    options:
      items_to_delete: node_modules .venv

  - name: gitignore.py
    desc: creates .gitignore - override `features` and `add-on` entries in project config
    cmd: uv run --no-project
    is_local: False
    options:
      features: python
      add-on: .pdm-python
